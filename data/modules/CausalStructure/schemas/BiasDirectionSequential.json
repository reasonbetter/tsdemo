{
  "SchemaID": "BiasDirectionSequential",
  "Description": "Assesses ability to explain a zero-observed difference via selection effects in both directions (benefit vs harm).",
  "Engine": { "driverId": "bias.direction.sequential.v1", "version": "1.0.0" },
  "GuidanceVersion": "v1",
  "Ability": { "key": "causal.selection.direction" },

  "ProbePolicy": {
    "AllowAJGeneratedFor": [],
    "MaxGeneratedChars": 160,
    "DisallowHintPatterns": ["\\bfor example\\b","\\bbecause\\b","\\btry mentioning\\b","\\bconsider\\b","\\be\\.g\\.\\b","\\bi\\.e\\.\\b"]
  },

  "PolicyDefaults": {
    "MaxConsecutiveFailedAttempts": 2,
    "MaxTotalFailedAttempts": 4
  },

  "DriverConfig": {
    "AJ_System_Guidance": {
      "AnswerTypeCatalog": [
        { "id": "BiasPositive", "description": "Assumes the true effect is beneficial (A helped). Provide a concrete selection or sampling mechanism that would mask or offset that benefit in the observed association." },
        { "id": "BiasNegative", "description": "Assumes the true effect is harmful (A harmed). Provide a concrete selection or sampling mechanism that would mask or offset that harm in the observed association." },
        { "id": "NotSpecific", "description": "Names bias or says groups differ without describing the specific factor or process (e.g., which people, how they were selected)." },
        { "id": "NotClear", "description": "Ambiguous or incoherent; requires rephrasing to understand the mechanism." },
        { "id": "NotPlausible", "description": "Mechanism is unrealistic or does not fit the context." },
        { "id": "NotRelevant", "description": "Does not address selection/sampling or the posed question." },
        { "id": "MultipleExplanation", "description": "Contains more than one distinct reason in a single turn." }
      ],
      "AnswerTypeGuidance": [
        "CORE TASK: Identify a selection or sampling mechanism (non-random sorting or inclusion) that explains the observed association.",
        "DIRECTION COMMITMENT: Choose exactly one direction per turn â€” 'BiasPositive' if you assume the intervention truly helped; 'BiasNegative' if you assume it truly harmed. Do not return both at once.",
        "SELECTION MECHANISM: A direction answer must describe how the groups differ or how the sample is biased, and how that produces the observed association despite the assumed true effect.",
        "SPECIFICITY: Responses that merely say 'selection bias' or 'the groups were different' without a concrete factor or process are 'NotSpecific'.",
        "THEME TAGGING (required when ThemeRegistry is present): If the item provides a ThemeRegistry, you MUST set 'ThemeTag' to the best matching ThemeID. If no ThemeRegistry is present, you may omit it. Novel mechanisms may use 'NOVEL:label'.",
        "DISTINCTNESS: At most one accepted answer per direction in a unit (one BiasPositive and one BiasNegative). Providing another answer in the same direction should not be accepted as a new distinct mechanism.",
        "MULTI-EXPLANATION HANDLING: If a user provides multiple reasons in one turn, classify as 'MultipleExplanation' and do not score content.",
        "TIE-BREAKING: If multiple categories fit, choose the earliest in DominanceOrder."
      ],
      "ProbingGuidance": [
        "VARIATION RULE: Prefer an unused Probe ID within the relevant category.",
        "DIRECTIONAL PROBES: After accepting 'BiasPositive', request the opposite direction using a probe from 'OppositeFromPositive'. After accepting 'BiasNegative', use 'OppositeFromNegative'.",
        "CLARIFICATION PROBES: For 'NotSpecific' and 'NotClear', use concise prompts that ask for a concrete factor/process or a clearer restatement; avoid hinting.",
        "NO GENERATION: Do not generate new probes; select from the item-level ProbeLibrary."
      ]
    },

    "ConfidencePolicy": { "MinAcceptConfidence": 0.65 },
    "MaxClarificationAttempts": 1,
    "ClarificationPolicy": {
      "MaxTotal": 2,
      "MaxConsecutiveNotSpecific": 1,
      "MaxConsecutiveNotClear": 1
    },

    "ProbeCategoryFor": {
      "BiasPositive": "OppositeFromPositive",
      "BiasNegative": "OppositeFromNegative",
      "NotSpecific": "NotSpecific",
      "NotClear": "NotClear",
      "NotPlausible": "NotPlausible",
      "NotRelevant": "NotRelevant",
      "MultipleExplanation": "MultipleExplanation"
    },

    

    "DominanceOrder": [
      "MultipleExplanation","NotRelevant","NotClear","NotSpecific","NotPlausible","BiasPositive","BiasNegative"
    ],

    "AnswerTypeMap": {
      "UpwardBias": "BiasPositive",
      "DownwardBias": "BiasNegative"
    }
  },

  "ScoringSpec": {
    "final": { "perDistinct": { "0": 0, "1": 0.5, "2": 1 } },
    "TargetDistinctExplanations": 2
  },

  "AJ_Contract_JsonSchema": {
    "$schema": "http://json-schema.org/draft-07/schema#",
    "type": "object",
    "properties": {
      "AnswerType": {
        "type": "string",
        "enum": ["BiasPositive","BiasNegative","NotSpecific","NotClear","NotRelevant","NotPlausible","MultipleExplanation"]
      },
      "ThemeTag": { "type": ["string","null"] },
      "Confidence": { "type": "number", "minimum": 0, "maximum": 1 },
      "RecommendedProbeID": { "type": ["string","null"] }
    },
    "required": ["AnswerType","Confidence"],
    "additionalProperties": false
  }
}
